fnc={},fnc.core={},fnc.uiControls={},fnc.uiControls.globals={},fnc.uiControls.inputControls={},fnc.uiControls.panels={},fnc.core.fncObject=function(){var t=function(){};return t.prototype={},t.prototype.initialize=function(t){for(var e in t)this[e]=t[e]},t}(),fnc.core.fncObjectCollection=function(){var t=fnc.core.fncObject,e=function(){this.values=[]};return e.prototype=new Object,e.prototype.push=function(e){if(!(e instanceof t))throw"Not an fncObject";this.values.push(e)},e.prototype.get=function(t){return this.values[t]},e}(),fnc.uiControls.uiElement=function(){var t=fnc.core.fncObject,e=function(t,i,r,n,o){t=t||"div",this.initialize=function(t,i,r){e.prototype.initialize.call(this,r),t&&(this.name=t),this.properties=i||{}},this.getProperty=function(t){return this.properties[t]},this.applyExplicitStyles=function(){var t=this.dom;this.properties.height&&(t.style.height=this.properties.height+"px"),this.properties.width&&(t.style.width=this.properties.width+"px")},this.initialize(i,n,o),this.tag=t,this.value=r||"",this.dom=null},i=function(){this.name&&this.dom.setAttribute("id",this.name),void 0===this.children&&("input"===this.tag?this.dom.setAttribute("value",this.dom.getAttribute("value")):this.dom.innerText=this.value);for(var t in this.properties)this.dom.setAttribute(t,this.properties[t]);return t},r=function(){for(var t in this.properties){var e=this.dom.style;if("grid.row"===t){var i=parseInt(this.properties[t]),r=this.grid;e.top=r.rows[i].top+"px","SELECT"!==this.dom.tagName&&"radio"!==this.dom.getAttribute("type")&&(e.height=r.rows[i].height+"px")}else if("grid.rowspan"===t){var n=parseInt(this.properties[t]),r=this.grid,o=0,s=this.properties["grid.row"];s&&(o=s);for(var l,p=0,h=0;l=r.rows[o+h],n>h;h++)p+=l.width;"SELECT"!==this.dom.tagName&&"radio"!==this.dom.getAttribute("type")&&(e.height=p+"px")}else if("grid.col"===t){var a=parseInt(this.properties[t]),r=this.grid;e.left=r.cols[a].left+"px",e.width=r.cols[a].width+"px"}else if("grid.colspan"===t){var c=parseInt(this.properties[t]),r=this.grid,d=0,u=this.properties["grid.col"];u&&(d=u);for(var f,m=0,g=0;f=r.cols[d+g],c>g;g++)m+=f.width;e.width=m+"px"}else if("f-canvas.left"===t){var y=parseInt(this.properties[t]);e.left=y+"px"}else if("f-canvas.top"===t){var v=parseInt(this.properties[t]);e.top=v+"px"}else if("dockpanel.dock"===t){var C=this.properties[t],w=this.dockpanel;if(C.indexOf("top")>-1){e.top=w.topStart+"px",w.topStart=w.topStart+parseInt(e.height.slice(0,-2));var m=parseInt(e.width.slice(0,-2));e.left="top-left"===C?"0":"top-right"===C?parseInt(w.properties.width)-m+"px":(parseInt(w.properties.width)-m)/2+"px"}else if(C.indexOf("bottom")>-1){e.top=w.bottomEnd-parseInt(e.height.slice(0,-2))+"px",w.bottomEnd=w.bottomEnd-parseInt(e.height.slice(0,-2));var m=parseInt(e.width.slice(0,-2));e.left="bottom-left"===C?"0":"bottom-right"===C?parseInt(w.properties.width)-m+"px":(parseInt(w.properties.width)-m)/2+"px"}else if("left"===C)e.top=(w.height-parseInt(e.height.slice(0,-2)))/2+"px",e.left="0";else if("right"===C){e.top=(w.height-parseInt(e.height.slice(0,-2)))/2+"px";var m=parseInt(e.width.slice(0,-2));e.left=parseInt(w.properties.width)-m+"px"}}}},n=function(){var t=this.dom;t.style.height="20px",t.style.width="100px",t.style.position="absolute",t.style.textAlign="center",t.style.boxSizing="border-box"};return e.prototype=new t,e.prototype.render=function(){return this.dom=document.createElement(this.tag),i.call(this),n.call(this),r.call(this),this.dom},e}(),fnc.uiControls.html5Control=function(){var t=fnc.uiControls.uiElement,e=function(t,e,i,r,n){t=t||"div",this.initialize(e,r,n),this.tag=t,this.value=i||"",this.dom=null},i=function(){for(var t,e=0;t=this.children.get(e);e++)this.dom.appendChild(t.render())};return e.prototype=new t,e.prototype.render=function(){return t.prototype.render.call(this),this.applyExplicitStyles(),this.children&&i.call(this),this.dom},e}(),fnc.uiControls.inputControls.radiobutton=function(){var t=fnc.uiControls.uiElement,e=function(t,e,i){this.initialize(t,e,i),this.tag="radiobutton"};return e.prototype=new t,e.prototype.render=function(){t.prototype.render.call(this),this.applyExplicitStyles();var e=document.createElement("input");e.setAttribute("type","radio"),e.setAttribute("id",this.dom.getAttribute("id")+"_radio"),this.dom.appendChild(e);var i=document.createElement("label");return i.setAttribute("for",e.getAttribute("id")),i.innerText=this.properties.value,i.style.width=this.dom.style.width,i.style.boxSizing=this.dom.style.boxSizing,this.dom.appendChild(i),this.dom},e}(),fnc.uiControls.inputControls.textbox=function(){var t=fnc.uiControls.uiElement,e=function(t,e,i){this.initialize(t,e,i),this.tag="textbox"};return e.prototype=new t,e.prototype.render=function(){t.prototype.render.call(this),this.applyExplicitStyles();var e=document.createElement("input");e.setAttribute("type","text");var i=this.properties.placeholder;i&&e.setAttribute("placeholder",i);var r=this.properties.value;return r&&e.setAttribute("value",r),e.style.width=this.dom.style.width,e.style.boxSizing=this.dom.style.boxSizing,this.dom.appendChild(e),this.dom},e}(),fnc.uiControls.panels.panel=function(){var t=fnc.uiControls.uiElement,e=fnc.core.fncObjectCollection,i=function(t,i,r){this.initialize(t,i,r),this.children=new e};return i.prototype=new t,i.prototype.render=function(){t.prototype.render.call(this),this.dom.style.position="relative"},i.prototype.renderChildren=function(){for(var t,e=0;t=this.children.get(e);e++)this.dom.appendChild(t.render())},i}(),fnc.uiControls.panels.fCanvas=function(){var t=fnc.uiControls.panels.panel,e=function(t,e,i){this.initialize(t,e,i),this.tag="f-canvas"};return e.prototype=new t,e.prototype.render=function(){return t.prototype.render.call(this),t.prototype.applyExplicitStyles.call(this),this.renderChildren(),this.dom},e}(),fnc.uiControls.panels.grid=function(){var t=fnc.uiControls.panels.panel,e=function(t,e,i){this.initialize(t,e,i),this.tag="grid",this.rows=[],this.cols=[]};return e.prototype=new t,e.prototype.render=function(){var e=function(t,e,i,r){for(var n,o=t.split(" "),s=0,l=0;n=o[l];l++){var p=parseInt(n);if(n.indexOf("%")>-1){if(e>0){var h=p*e/100;s+=h;var a={};a[r]=h,i.push(a)}}else if("*"===n){var a={};a[r]=e-s,i.push(a),s=e}else{s+=p;var a={};a[r]=p,i.push(a)}}s>0&&(this.dom.style[r]=s+"px")},i=function(){if(this.properties.rowheights){e.call(this,this.properties.rowheights,parseInt(this.properties.height),this.rows,"height");for(var t,i=this.rows,r=0,n=0;t=i[n];n++)t.top=r,r+=t.height}},r=function(){if(this.properties.colwidths){e.call(this,this.properties.colwidths,parseInt(this.properties.width),this.cols,"width");for(var t,i=this.cols,r=0,n=0;t=i[n];n++)t.left=r,r+=t.width}};return t.prototype.render.call(this),i.call(this),r.call(this),this.renderChildren(),this.dom},e}(),fnc.uiControls.panels.stackpanel=function(){var t=fnc.uiControls.panels.panel,e=function(t,e,i){this.initialize(t,e,i),this.tag="stackpanel"},i=function(){var t=this.properties.orientation||"horizontal";if("horizontal"===t){for(var e,i=0,r=0,n=0;e=this.children.get(n);n++){var o=e.dom.style;o.left=i+"px";var s=parseInt(o.width.slice(0,-2)),l=parseInt(o.height.slice(0,-2));i+=s,l>r&&(r=l)}this.dom.style.width=i+"px",this.dom.style.height=r+"px"}else{for(var e,p=0,h=0,n=0;e=this.children.get(n);n++){var o=e.dom.style;o.top=p+"px";var l=parseInt(o.height.slice(0,-2)),s=parseInt(o.width.slice(0,-2));p+=l,s>h&&(h=s)}this.dom.style.height=p+"px",this.dom.style.width=h+"px"}};return e.prototype=new t,e.prototype.render=function(){return t.prototype.render.call(this),this.renderChildren(),i.call(this),this.applyExplicitStyles(),this.dom},e}(),fnc.uiControls.panels.wrappanel=function(){var t=fnc.uiControls.panels.panel,e=function(t,e,i){this.initialize(t,e,i),this.tag="wrappanel"},i=function(){for(var t,e=0,i=0,r=0,n=this.properties.width||null,o=0;t=this.children.get(o);o++){var s=t.dom.style,l=parseInt(s.width.slice(0,-2)),p=parseInt(s.height.slice(0,-2));n&&e+l>parseInt(n)?(e=0,i+=r,r=p):p>r&&(r=p),s.left=e+"px",s.top=i+"px",e+=l}this.dom.style.width=e+"px",this.dom.style.height=i+r+"px"};return e.prototype=new t,e.prototype.render=function(){return t.prototype.render.call(this),this.renderChildren(),i.call(this),t.prototype.applyExplicitStyles.call(this),this.dom},e}(),fnc.uiControls.panels.dockpanel=function(){var t=fnc.uiControls.panels.panel,e=function(t,e,i){this.initialize(t,e,i),this.tag="dockpanel",this.topStart=0,this.bottomEnd=0,this.height=0};return e.prototype=new t,e.prototype.render=function(){return t.prototype.render.call(this),t.prototype.applyExplicitStyles.call(this),this.height=parseInt(this.dom.style.height.slice(0,-2)),this.bottomEnd=this.height,this.renderChildren(),this.dom},e}(),fnc.core.factory=function(){var t=fnc.core.fncObjectCollection,e=fnc.uiControls.uiElement,i=fnc.uiControls.html5Control,r=fnc.uiControls.panels.grid,n=fnc.uiControls.panels.stackpanel,o=fnc.uiControls.panels.wrappanel,s=fnc.uiControls.panels.fCanvas,l=fnc.uiControls.panels.dockpanel,p=fnc.uiControls.inputControls.textbox,h=fnc.uiControls.inputControls.radiobutton;return{createUiControl:function(a,c,d){c=c||{},d=d||{};for(var u,f=a.attributes,m=0;u=f[m];m++)c[u.name]=u.value;var g=new e;if("GRID"===a.tagName){g=new r(c.id,c,d);for(var y,m=0;y=a.children[m];m++)g.children.push(this.createUiControl(y,{},{grid:g}))}else if("STACKPANEL"===a.tagName){g=new n(c.id,c,d);for(var y,m=0;y=a.children[m];m++)g.children.push(this.createUiControl(y,{},{stackpanel:g}))}else if("WRAPPANEL"===a.tagName){g=new o(c.id,c,d);for(var y,m=0;y=a.children[m];m++)g.children.push(this.createUiControl(y,{},{wrappanel:g}))}else if("F-CANVAS"===a.tagName){g=new s(c.id,c,d);for(var y,m=0;y=a.children[m];m++)g.children.push(this.createUiControl(y,{},{f_canvas:g}))}else if("DOCKPANEL"===a.tagName){g=new l(c.id,c,d);for(var y,m=0;y=a.children[m];m++)g.children.push(this.createUiControl(y,{},{dockpanel:g}))}else if("TEXTBOX"===a.tagName)g=new p(c.id,c,d);else if("RADIOBUTTON"===a.tagName)g=new h(c.id,c,d);else if(g=new i(a.tagName.toLowerCase(),c.id,a.innerText,c,d),a.children.length>0){g.children=new t;for(var y,m=0;y=a.children[m];m++)g.children.push(this.createUiControl(y,{},{grid:g}))}return g}}}(),fnc.uiControls.globals.rootVisual=function(){var t=fnc.uiControls.uiElement,e=fnc.core.factory,i=function(t){t&&(this.child=t),this.dom=document.getElementsByTagName("body")[0],this.refreshVisualTree=function(){for(var t,i=0;t=this.dom.children[i];i++)if("SCRIPT"!==t.tagName){this.child=e.createUiControl(t),this.render();break}},this.refreshVisualTree()};return i.prototype=new t,i.prototype.render=function(){var t=this.dom.getElementsByTagName(this.child.tag)[0];t&&this.dom.removeChild(t),this.dom.appendChild(this.child.render())},i}(),fnc.body=new fnc.uiControls.globals.rootVisual;