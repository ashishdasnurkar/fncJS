fnc={},fnc.core={},fnc.uiControls={},fnc.uiControls.globals={},fnc.uiControls.inputControls={},fnc.uiControls.panels={},fnc.core.fncObject=function(){var t=function(){};return t.prototype={},t.prototype.initialize=function(t){for(var i in t)this[i]=t[i]},t}(),fnc.core.fncObjectCollection=function(){var t=fnc.core.fncObject,i=function(){this.values=[]};return i.prototype=new Object,i.prototype.push=function(i){if(!(i instanceof t))throw"Not an fncObject";this.values.push(i)},i.prototype.get=function(t){return this.values[t]},i}(),fnc.uiControls.uiElement=function(){var t=fnc.core.fncObject,i=function(t,e,r,n,o){t=t||"div",this.initialize=function(t,e,r){i.prototype.initialize.call(this,r),t&&(this.name=t),this.properties=e||{}},this.getProperty=function(t){return this.properties[t]},this.initialize(e,n,o),this.tag=t,this.value=r||"",this.dom=null},e=function(){var t=this.dom,i=parseInt(this.properties.width);i&&(t.style.width=i+"px",this.width=i);var e=parseInt(this.properties.height);e&&(t.style.height=e+"px",this.height=e)},r=function(){this.name&&this.dom.setAttribute("id",this.name),void 0===this.children&&("input"===this.tag?this.dom.setAttribute("value",this.dom.getAttribute("value")):this.dom.innerText=this.value);for(var t in this.properties)this.dom.setAttribute(t,this.properties[t]);return t},n=function(){for(var t in this.properties){var i=this.dom.style;if("grid.row"===t){var e=parseInt(this.properties[t]),r=this.grid;i.top=r.rows[e].top+"px","SELECT"!==this.dom.tagName&&"radio"!==this.dom.getAttribute("type")&&(i.height=r.rows[e].height+"px")}else if("grid.rowspan"===t){var n=parseInt(this.properties[t]),r=this.grid,o=0,s=this.properties["grid.row"];s&&(o=s);for(var h,a=0,l=0;h=r.rows[o+l],n>l;l++)a+=h.width;"SELECT"!==this.dom.tagName&&"radio"!==this.dom.getAttribute("type")&&(i.height=a+"px")}else if("grid.col"===t){var p=parseInt(this.properties[t]),r=this.grid;i.left=r.cols[p].left+"px",i.width=r.cols[p].width+"px"}else if("grid.colspan"===t){var d=parseInt(this.properties[t]),r=this.grid,c=0,f=this.properties["grid.col"];f&&(c=f);for(var u,g=0,m=0;u=r.cols[c+m],d>m;m++)g+=u.width;i.width=g+"px"}else if("f-canvas.left"===t){var v=parseInt(this.properties[t]);i.left=v+"px"}else if("f-canvas.top"===t){var w=parseInt(this.properties[t]);i.top=w+"px"}else if("dockpanel.dock"===t){var y=this.dockpanel;this.properties.height||(i.height=y.bottomEnd-y.topStart+"px");var C=this.properties[t];if(C.indexOf("top")>-1){i.top=y.topStart+"px",y.topStart=y.topStart+parseInt(i.height.slice(0,-2));var g=parseInt(i.width.slice(0,-2));i.left="top-left"===C?"0":"top-right"===C?y.width-g+"px":(y.width-g)/2+"px"}else if(C.indexOf("bottom")>-1){i.top=y.bottomEnd-parseInt(i.height.slice(0,-2))+"px",y.bottomEnd=y.bottomEnd-parseInt(i.height.slice(0,-2));var g=parseInt(i.width.slice(0,-2));i.left="bottom-left"===C?"0":"bottom-right"===C?y.width-g+"px":(y.width-g)/2+"px"}else if("left"===C)i.top=(y.height-parseInt(i.height.slice(0,-2)))/2+"px",i.left="0";else if("right"===C){i.top=(y.height-parseInt(i.height.slice(0,-2)))/2+"px";var g=parseInt(i.width.slice(0,-2));i.left=y.width-g+"px"}}}},o=function(t){var i=this.dom;if(t)var e=t.available_width,r=t.available_height;this.width=e||100,this.height=r||20,i.style.width=this.width+"px",i.style.height=this.height+"px",i.style.position="absolute",i.style.textAlign="center",i.style.boxSizing="border-box"};return i.prototype=new t,i.prototype.render=function(t){return this.dom=document.createElement(this.tag),r.call(this),o.call(this,t),e.call(this),n.call(this),this.dom},i}(),fnc.uiControls.html5Control=function(){var t=fnc.uiControls.uiElement,i=function(t,i,e,r,n){t=t||"div",this.initialize(i,r,n),this.tag=t,this.value=e||"",this.dom=null},e=function(){for(var t,i=0;t=this.children.get(i);i++)this.dom.appendChild(t.render())};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.children&&e.call(this),this.dom},i}(),fnc.uiControls.inputControls.radiobutton=function(){var t=fnc.uiControls.uiElement,i=function(t,i,e){this.initialize(t,i,e),this.tag="radiobutton"};return i.prototype=new t,i.prototype.render=function(){t.prototype.render.call(this);var i=document.createElement("input");i.setAttribute("type","radio"),i.setAttribute("id",this.dom.getAttribute("id")+"_radio"),this.dom.appendChild(i);var e=document.createElement("label");return e.setAttribute("for",i.getAttribute("id")),e.innerText=this.properties.value,e.style.width=this.dom.style.width,e.style.boxSizing=this.dom.style.boxSizing,this.dom.appendChild(e),this.dom},i}(),fnc.uiControls.inputControls.textbox=function(){var t=fnc.uiControls.uiElement,i=function(t,i,e){this.initialize(t,i,e),this.tag="textbox"};return i.prototype=new t,i.prototype.render=function(){t.prototype.render.call(this);var i=document.createElement("input");i.setAttribute("type","text");var e=this.properties.placeholder;e&&i.setAttribute("placeholder",e);var r=this.properties.value;return r&&i.setAttribute("value",r),i.style.width=this.dom.style.width,i.style.boxSizing=this.dom.style.boxSizing,this.dom.appendChild(i),this.dom},i}(),fnc.uiControls.panels.panel=function(){var t=fnc.uiControls.uiElement,i=fnc.core.fncObjectCollection,e=function(t,e,r){this.initialize(t,e,r),this.children=new i};return e.prototype=new t,e.prototype.render=function(i){t.prototype.render.call(this,i),this.dom.style.position="relative"},e.prototype.renderChildren=function(t){for(var i,e=0;i=this.children.get(e);e++)this.dom.appendChild(i.render(t))},e}(),fnc.uiControls.panels.fCanvas=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="f-canvas"};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.renderChildren(),this.dom},i}(),fnc.uiControls.panels.grid=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="grid",this.rows=[],this.cols=[]};return i.prototype=new t,i.prototype.render=function(i){var e=function(t,i,e,r){for(var n,o=t.split(" "),s=0,h=0;n=o[h];h++){var a=parseInt(n);if(n.indexOf("%")>-1){if(i>0){var l=a*i/100;s+=l;var p={};p[r]=l,e.push(p)}}else if("*"===n){var p={};p[r]="*",e.push(p)}else{s+=a;var p={};p[r]=a,e.push(p)}}for(var p,h=0;p=e[h];h++)"*"===p[r]&&(p[r]=i-s,s=i);s>0&&(this.dom.style[r]=s+"px")},r=function(){if(this.properties.rowheights){e.call(this,this.properties.rowheights,this.height,this.rows,"height");for(var t,i=this.rows,r=0,n=0;t=i[n];n++)t.top=r,r+=t.height}},n=function(){if(this.properties.colwidths){e.call(this,this.properties.colwidths,this.width,this.cols,"width");for(var t,i=this.cols,r=0,n=0;t=i[n];n++)t.left=r,r+=t.width}};return t.prototype.render.call(this,i),r.call(this),n.call(this),this.renderChildren(),this.dom},i}(),fnc.uiControls.panels.stackpanel=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="stackpanel"},e=function(){var t=this.properties.orientation||"horizontal";if("horizontal"===t){for(var i,e=0,r=0,n=0;i=this.children.get(n);n++){var o=i.dom.style;o.left=e+"px";var s=parseInt(o.width.slice(0,-2)),h=parseInt(o.height.slice(0,-2));e+=s,h>r&&(r=h)}this.dom.style.width=(e>this.width?e:this.width)+"px",this.dom.style.height=(r>this.height?r:this.height)+"px"}else{for(var i,a=0,l=0,n=0;i=this.children.get(n);n++){var o=i.dom.style;o.top=a+"px";var h=parseInt(o.height.slice(0,-2)),s=parseInt(o.width.slice(0,-2));a+=h,s>l&&(l=s)}this.dom.style.height=(a>this.height?a:this.height)+"px",this.dom.style.width=(l>this.width?l:this.width)+"px"}};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.renderChildren(),e.call(this),this.dom},i}(),fnc.uiControls.panels.wrappanel=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="wrappanel"},e=function(){for(var t,i=0,e=0,r=0,n=this.properties.width||null,o=0;t=this.children.get(o);o++){var s=t.dom.style,h=parseInt(s.width.slice(0,-2)),a=parseInt(s.height.slice(0,-2));n&&i+h>parseInt(n)?(i=0,e+=r,r=a):a>r&&(r=a),s.left=i+"px",s.top=e+"px",i+=h}this.dom.style.width=(i>this.width?i:this.width)+"px";var l=e+r;this.dom.style.height=(l>this.height?l:this.height)+"px"};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.renderChildren(),e.call(this),this.dom},i}(),fnc.uiControls.panels.dockpanel=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="dockpanel",this.topStart=0,this.bottomEnd=0,this.height=0};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.height=parseInt(this.dom.style.height.slice(0,-2)),this.bottomEnd=this.height,this.renderChildren({available_width:this.width,available_height:this.bottomEnd-this.topStart}),this.dom},i}(),fnc.core.factory=function(){var t=fnc.core.fncObjectCollection,i=fnc.uiControls.uiElement,e=fnc.uiControls.html5Control,r=fnc.uiControls.panels.grid,n=fnc.uiControls.panels.stackpanel,o=fnc.uiControls.panels.wrappanel,s=fnc.uiControls.panels.fCanvas,h=fnc.uiControls.panels.dockpanel,a=fnc.uiControls.inputControls.textbox,l=fnc.uiControls.inputControls.radiobutton;return{createUiControl:function(p,d,c){d=d||{},c=c||{};for(var f,u=p.attributes,g=0;f=u[g];g++)d[f.name]=f.value;var m=new i;if("GRID"===p.tagName){m=new r(d.id,d,c);for(var v,g=0;v=p.children[g];g++)m.children.push(this.createUiControl(v,{},{grid:m}))}else if("STACKPANEL"===p.tagName){m=new n(d.id,d,c);for(var v,g=0;v=p.children[g];g++)m.children.push(this.createUiControl(v,{},{stackpanel:m}))}else if("WRAPPANEL"===p.tagName){m=new o(d.id,d,c);for(var v,g=0;v=p.children[g];g++)m.children.push(this.createUiControl(v,{},{wrappanel:m}))}else if("F-CANVAS"===p.tagName){m=new s(d.id,d,c);for(var v,g=0;v=p.children[g];g++)m.children.push(this.createUiControl(v,{},{f_canvas:m}))}else if("DOCKPANEL"===p.tagName){m=new h(d.id,d,c);for(var v,g=0;v=p.children[g];g++)m.children.push(this.createUiControl(v,{},{dockpanel:m}))}else if("TEXTBOX"===p.tagName)m=new a(d.id,d,c);else if("RADIOBUTTON"===p.tagName)m=new l(d.id,d,c);else if(m=new e(p.tagName.toLowerCase(),d.id,p.innerText,d,c),p.children.length>0){m.children=new t;for(var v,g=0;v=p.children[g];g++)m.children.push(this.createUiControl(v,{},{grid:m}))}return m}}}(),fnc.uiControls.globals.rootVisual=function(){var t=fnc.uiControls.uiElement,i=fnc.core.factory,e=function(t){t&&(this.child=t),this.dom=document.getElementsByTagName("body")[0];for(var e,r=this.dom.attributes,n=0;e=r[n];n++)this.properties[e.name]=e.value,"standard-width"===e.name&&(this.standardWidth=parseInt(e.value)),"standard-height"===e.name&&(this.standardHeight=parseInt(e.value));this.refreshVisualTree=function(){for(var t,e=0;t=this.dom.children[e];e++)if("SCRIPT"!==t.tagName){this.child=i.createUiControl(t),this.render();break}},this.refreshVisualTree()};return e.prototype=new t,e.prototype.render=function(){var t=this.dom.getElementsByTagName(this.child.tag)[0];t&&this.dom.removeChild(t);var i=this.standardWidth>window.innerWidth?this.standardWidth:window.innerWidth,e=this.standardHeight>window.innerHeight?this.standardHeight:window.innerHeight;this.dom.appendChild(this.child.render({available_width:i,available_height:e})),this.scaleAsPerStandardDimensions()},e.prototype.scaleAsPerStandardDimensions=function(){var t=window.innerWidth/this.standardWidth;1>t&&(this.dom.style.transform=this.dom.style.transform+" scaleX("+t+")");var i=window.innerHeight/this.standardHeight;1>i&&(this.dom.style.transform=this.dom.style.transform+" scaleY("+i+")")},e}(),fnc.body=new fnc.uiControls.globals.rootVisual;