fnc={},fnc.core={},fnc.uiControls={},fnc.uiControls.globals={},fnc.uiControls.inputControls={},fnc.uiControls.orchestrators={},fnc.uiControls.panels={},fnc.core.fncObject=function(){var t=function(){};return t.prototype={},t.prototype.initialize=function(t){for(var i in t)this[i]=t[i]},t}(),fnc.core.fncObjectCollection=function(){var t=fnc.core.fncObject,i=function(){this.values=[]};return i.prototype=new Object,i.prototype.push=function(i){if(!(i instanceof t))throw"Not an fncObject";this.values.push(i)},i.prototype.get=function(t){return this.values[t]},i}(),fnc.uiControls.uiElement=function(){var t=fnc.core.fncObject,i=function(t,e,r,n,o){t=t||"div",this.initialize=function(t,e,r){i.prototype.initialize.call(this,r),t&&(this.name=t),this.properties=e||{}},this.getProperty=function(t){return this.properties[t]},this.initialize(e,n,o),this.tag=t,this.value=r||"",this.dom=null},e=function(){var t=this.dom,i=parseInt(this.properties.width);i&&(t.style.width=i+"px",this.width=i);var e=parseInt(this.properties.height);e&&(t.style.height=e+"px",this.height=e)},r=function(){this.name&&this.dom.setAttribute("id",this.name),void 0===this.children&&("input"===this.tag?this.dom.setAttribute("value",this.dom.getAttribute("value")):("div"===this.tag||"label"===this.tag||"li"===this.tag||"dockpanel"===this.tag||"f_canvas"===this.tag||"grid"===this.tag||"stackpanel"===this.tag||"wrappanel"===this.tag||"span"===this.tag)&&(this.dom.innerText=this.value));for(var t in this.properties)this.dom.setAttribute(t,this.properties[t]);return t},n=function(){for(var t in this.properties){var i=this.dom.style;if("grid.row"===t){var e=parseInt(this.properties[t]),r=this.grid;i.top=r.rows[e].top+"px","SELECT"!==this.dom.tagName&&"radio"!==this.dom.getAttribute("type")&&(i.height=r.rows[e].height+"px")}else if("grid.rowspan"===t){var n=parseInt(this.properties[t]),r=this.grid,o=0,s=this.properties["grid.row"];s&&(o=s);for(var h,l=0,a=0;h=r.rows[o+a],n>a;a++)l+=h.height;"SELECT"!==this.dom.tagName&&"radio"!==this.dom.getAttribute("type")&&(i.height=l+"px")}else if("grid.col"===t){var p=parseInt(this.properties[t]),r=this.grid;i.left=r.cols[p].left+"px",i.width=r.cols[p].width+"px"}else if("grid.colspan"===t){var d=parseInt(this.properties[t]),r=this.grid,c=0,u=this.properties["grid.col"];u&&(c=u);for(var f,g=0,m=0;f=r.cols[c+m],d>m;m++)g+=f.width;i.width=g+"px"}else if("f-canvas.left"===t){var v=parseInt(this.properties[t]);i.left=v+"px"}else if("f-canvas.top"===t){var w=parseInt(this.properties[t]);i.top=w+"px"}else if("dockpanel.dock"===t){var y=this.dockpanel;this.properties.height||(i.height=y.bottomEnd-y.topStart+"px");var C=this.properties[t];if(C.indexOf("top")>-1){i.top=y.topStart+"px",y.topStart=y.topStart+parseInt(i.height.slice(0,-2));var g=parseInt(i.width.slice(0,-2));i.left="top-left"===C?"0":"top-right"===C?y.width-g+"px":(y.width-g)/2+"px"}else if(C.indexOf("bottom")>-1){i.top=y.bottomEnd-parseInt(i.height.slice(0,-2))+"px",y.bottomEnd=y.bottomEnd-parseInt(i.height.slice(0,-2));var g=parseInt(i.width.slice(0,-2));i.left="bottom-left"===C?"0":"bottom-right"===C?y.width-g+"px":(y.width-g)/2+"px"}else if("left"===C)i.top=(y.height-parseInt(i.height.slice(0,-2)))/2+"px",i.left="0";else if("right"===C){i.top=(y.height-parseInt(i.height.slice(0,-2)))/2+"px";var g=parseInt(i.width.slice(0,-2));i.left=y.width-g+"px"}}}},o=function(t){var i=this.dom;if(t)var e=t.available_width,r=t.available_height;"SELECT"===this.dom.tagName||"radio"===this.dom.getAttribute("type")?i.style.height="20px":(i.style.width=e?e+"px":"100%",i.style.height=r?r+"px":"100%",this.width=e?i.offsetWidth:window.innerWidth,this.height=r?i.offsetHeight:window.innerHeight),i.style.display="block",i.style.position="absolute",i.style.textAlign="div"===this.tag||"span"===this.tag||"ul"===this.tag||"ol"===this.tag||"li"===this.tag?"left":"center",i.style.boxSizing="border-box"};return i.prototype=new t,i.prototype.render=function(t){return this.dom=document.createElement(this.tag),r.call(this),o.call(this,t),n.call(this),e.call(this),this.dom},i}(),fnc.uiControls.html5Control=function(){var t=fnc.uiControls.uiElement,i=function(t,i,e,r,n){t=t||"div",this.initialize(i,r,n),this.tag=t,this.value=e||"",this.dom=null},e=function(){for(var t,i=0;t=this.children.get(i);i++){var e=t.render();e.style.position="static",e.style.width=null,e.style.height=null,this.dom.appendChild(e)}};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.dom.innerText=this.value,this.children&&e.call(this),this.dom},i}(),fnc.uiControls.inputControls.radiobutton=function(){var t=fnc.uiControls.uiElement,i=function(t,i,e){this.initialize(t,i,e),this.tag="radiobutton"};return i.prototype=new t,i.prototype.render=function(){t.prototype.render.call(this);var i=document.createElement("input");i.setAttribute("type","radio"),i.setAttribute("id",this.dom.getAttribute("id")+"_radio"),this.dom.appendChild(i);var e=document.createElement("label");return e.setAttribute("for",i.getAttribute("id")),e.innerText=this.properties.value,e.style.width=this.dom.style.width,e.style.boxSizing=this.dom.style.boxSizing,this.dom.appendChild(e),this.dom},i}(),fnc.uiControls.inputControls.textbox=function(){var t=fnc.uiControls.uiElement,i=function(t,i,e){this.initialize(t,i,e),this.tag="textbox"};return i.prototype=new t,i.prototype.render=function(){t.prototype.render.call(this);var i=document.createElement("input");i.setAttribute("type","text");var e=this.properties.placeholder;e&&i.setAttribute("placeholder",e);var r=this.properties.value;return r&&i.setAttribute("value",r),i.style.width=this.dom.style.width,i.style.boxSizing=this.dom.style.boxSizing,this.dom.appendChild(i),this.dom},i}(),fnc.uiControls.panels.panel=function(){var t=fnc.uiControls.uiElement,i=fnc.core.fncObjectCollection,e=function(){this.initialize=function(t,r,n){e.prototype.initialize.call(this,t,r,n),this.children=new i}};return e.prototype=new t,e.prototype.render=function(i){t.prototype.render.call(this,i),this.dom.style.position="relative"},e.prototype.renderChildren=function(t){for(var i,e=0;i=this.children.get(e);e++)this.dom.appendChild(i.render(t))},e}(),fnc.uiControls.panels.fCanvas=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="f-canvas"};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.renderChildren(),this.dom},i}(),fnc.uiControls.panels.grid=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="grid",this.rows=[],this.cols=[]};return i.prototype=new t,i.prototype.render=function(i){var e=function(t,i,e,r){for(var n,o=t.split(" "),s=0,h=0;n=o[h];h++){var l=parseInt(n);if(n.indexOf("%")>-1){if(i>0){var a=l*i/100;s+=a;var p={};p[r]=a,e.push(p)}}else if("*"===n){var p={};p[r]="*",e.push(p)}else{s+=l;var p={};p[r]=l,e.push(p)}}for(var p,h=0;p=e[h];h++)"*"===p[r]&&(p[r]=i-s,s=i);s>0&&(this.dom.style[r]=s+"px")},r=function(){if(this.properties.rowheights){e.call(this,this.properties.rowheights,this.height,this.rows,"height");for(var t,i=this.rows,r=0,n=0;t=i[n];n++)t.top=r,r+=t.height}},n=function(){if(this.properties.colwidths){e.call(this,this.properties.colwidths,this.width,this.cols,"width");for(var t,i=this.cols,r=0,n=0;t=i[n];n++)t.left=r,r+=t.width}};return t.prototype.render.call(this,i),r.call(this),n.call(this),this.renderChildren(),this.dom},i}(),fnc.uiControls.panels.stackpanel=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="stackpanel"},e=function(){var t=this.properties.orientation||"horizontal";if("horizontal"===t){for(var i,e=0,r=0,n=0;i=this.children.get(n);n++){var o=i.dom.style;o.left=e+"px";var s=parseInt(o.width.slice(0,-2)),h=parseInt(o.height.slice(0,-2));e+=s,h>r&&(r=h)}this.dom.style.width=e+"px",this.dom.style.height=(r>this.height?r:this.height)+"px"}else{for(var i,l=0,a=0,n=0;i=this.children.get(n);n++){var o=i.dom.style;o.top=l+"px";var h=parseInt(o.height.slice(0,-2)),s=parseInt(o.width.slice(0,-2));l+=h,s>a&&(a=s)}this.dom.style.height=l+"px",this.dom.style.width=(a>this.width?a:this.width)+"px"}};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.renderChildren(),e.call(this),this.dom},i}(),fnc.uiControls.panels.wrappanel=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="wrappanel"},e=function(){for(var t,i=0,e=0,r=0,n=this.properties.width||null,o=0;t=this.children.get(o);o++){var s=t.dom.style,h=parseInt(s.width.slice(0,-2)),l=parseInt(s.height.slice(0,-2));n&&i+h>parseInt(n)?(i=0,e+=r,r=l):l>r&&(r=l),s.left=i+"px",s.top=e+"px",i+=h}this.dom.style.width=(i>this.width?i:this.width)+"px";var a=e+r;this.dom.style.height=(a>this.height?a:this.height)+"px"};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.renderChildren(),e.call(this),this.dom},i}(),fnc.uiControls.panels.dockpanel=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(t,i,e),this.tag="dockpanel",this.topStart=0,this.bottomEnd=0,this.height=0};return i.prototype=new t,i.prototype.render=function(i){return t.prototype.render.call(this,i),this.height=parseInt(this.dom.style.height.slice(0,-2)),this.bottomEnd=this.height,this.renderChildren({available_width:this.width,available_height:this.bottomEnd-this.topStart}),this.dom},i}(),fnc.uiControls.orchestrators.loadingStage=function(){var t=fnc.uiControls.panels.panel,i=function(t,i,e){this.initialize(i.id,i,e),this.tag="loading-stage"};return i.prototype=new t,i.prototype.render=function(){this.dom=document.createElement(this.tag);for(var t,i=0;t=this.children.get(i);i++)if("javascript"===t.tag){var e=document.createElement("script");e.src=t.properties.src,e.async=!1,document.head.appendChild(e)}else{var r=t.render();r.style.position="static",r.style.width=null,r.style.height=null,this.dom.appendChild(r)}return this.dom},i}(),fnc.uiControls.orchestrators.loader=function(){var t=fnc.uiControls.uiElement,i=fnc.core.fncObjectCollection,e=function(t,e,r){this.initialize(e.id,e,r),this.tag="loader",this.loadingStages=new i};return e.prototype=new t,e.prototype.render=function(){this.dom=document.createElement(this.tag);for(var t,i=0;t=this.loadingStages.get(i);i++)this.dom.appendChild(t.render());return this.dom},e}(),fnc.core.factory=function(){var t=fnc.core.fncObjectCollection,i=fnc.uiControls.uiElement,e=fnc.uiControls.html5Control,r=fnc.uiControls.orchestrators.loader,n=fnc.uiControls.orchestrators.loadingStage,o=fnc.uiControls.panels.grid,s=fnc.uiControls.panels.stackpanel,h=fnc.uiControls.panels.wrappanel,l=fnc.uiControls.panels.fCanvas,a=fnc.uiControls.panels.dockpanel,p=fnc.uiControls.inputControls.textbox,d=fnc.uiControls.inputControls.radiobutton;return{createUiControl:function(c,u,f){u=u||{},f=f||{};for(var g,m=c.attributes,v=0;g=m[v];v++)u[g.name]=g.value;var w=new i;if("LOADER"===c.tagName){w=new r(c,u,f);for(var y,v=0;y=c.children[v];v++)w.loadingStages.push(this.createUiControl(y,{},{}))}else if("LOADING-STAGE"===c.tagName){w=new n(c,u,f);for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{}))}else if("GRID"===c.tagName){w=new o(u.id,u,f);for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{grid:w}))}else if("STACKPANEL"===c.tagName){w=new s(u.id,u,f);for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{stackpanel:w}))}else if("WRAPPANEL"===c.tagName){w=new h(u.id,u,f);for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{wrappanel:w}))}else if("F-CANVAS"===c.tagName){w=new l(u.id,u,f);for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{f_canvas:w}))}else if("DOCKPANEL"===c.tagName){w=new a(u.id,u,f);for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{dockpanel:w}))}else if("TEXTBOX"===c.tagName)w=new p(u.id,u,f);else if("RADIOBUTTON"===c.tagName)w=new d(u.id,u,f);else{var C=c.innerText;if(c.firstChild&&3==c.firstChild.nodeType&&(C=c.firstChild.data),w=new e(c.tagName.toLowerCase(),u.id,C,u,f),c.children.length>0){w.children=new t;for(var y,v=0;y=c.children[v];v++)w.children.push(this.createUiControl(y,{},{grid:w}))}}return w}}}(),fnc.uiControls.globals.rootVisual=function(){var t=fnc.uiControls.uiElement,i=fnc.core.factory,e=function(t){t&&(this.child=t),this.dom=document.body;for(var e,r=this.dom.attributes,n=0;e=r[n];n++)this.properties[e.name]=e.value,"min-resolution-width"===e.name&&(this.minResolutionWidth=parseInt(e.value));this.refreshVisualTree=function(){for(var t,e=0;t=this.dom.children[e];e++)if("SCRIPT"!==t.tagName){this.child=i.createUiControl(t),this.render();break}},this.refreshVisualTree()};return e.prototype=new t,e.prototype.render=function(){var t=this.child.render({available_width:i,available_height:e}),i=this.minResolutionWidth>window.innerWidth?this.minResolutionWidth:window.innerWidth,e=this.minResolutionWidth*window.innerHeight/window.innerWidth;this.dom.style.width=i+"px",this.dom.style.height=e+"px";var r=this.dom.getElementsByTagName(this.child.tag)[0];r&&this.dom.removeChild(r),this.dom.appendChild(t),this.scaleAsPerStandardDimensions()},e.prototype.scaleAsPerStandardDimensions=function(){var t=window.innerWidth/this.minResolutionWidth;1>t&&(this.dom.style.transform=this.dom.style.transform+" scaleX("+t+") scaleY("+t+")")},e}(),fnc.body=new fnc.uiControls.globals.rootVisual;